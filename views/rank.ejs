<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Records</title>
    <link rel="stylesheet" href="/rank.css">
</head>
<body>
    <div class="nav">
        <h4 class="back"><a href="/"><button>Home</button></a></h4>
        <h1>Student Ranks</h1><br><br>
    </div>
    <form action="/rank/search" method="POST">
        <input type="text" name="regNo" placeholder="Enter Registration Number" value="<%= query %>">
        <button type="submit">Search</button>
        <button id="clear" onclick="clearSearch()">Clear</button>
    </form>
    <div class="head">
        <div><h2>Rank</h2></div>
        <div><h2>Reg.No</h2></div>
        <div><h2>Name</h2></div>
        <div><h2>Father</h2></div>
        <div><h2>Branch</h2></div>
        <div><h2>Gender</h2></div>
        <div><h2>State</h2></div>
        <div><h2>Section</h2></div>
        <div><h2>CGPA</h2></div>
    </div><br><hr>
    <div class="data">
        <% if (students.length === 0) { %>
            <h1>No Matching Records Found</h1>
        <% } else { %>
            <% students.forEach(student => { %>
                <div class="row">
                    <div><h4><%= student.Rank %></h4></div>
                    <div><h4><%= student.RegNo %></h4></div>
                    <div><h4><%= student.Name %></h4></div>
                    <div><h4><%= student.Father %></h4></div>
                    <div><h4><%= student.Branch %></h4></div>
                    <div><h4><%= student.Gender %></h4></div>
                    <div><h4><%= student.State %></h4></div>
                    <div><h4><%= student.Section %></h4></div>
                    <div><h3 class="cgpa"><%= student.CGPA %></h3></div>
                </div>
                <br>
            <% }); %>
        <% } %>
    </div>
    <script>
        function clearSearch() {
            document.querySelector('input[name="regNo"]').value = ''; 
        }
    </script>
</body>
</html>
